# –¶–≤–µ—Ç–∞
RED=\033[0;31m
GREEN=\033[0;32m
NC=\033[0m # No Color

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
install:
	npm ci

# –õ–∏–Ω—Ç
lint:
	npx eslint .

# –ê–≤—Ç–æ—Ñ–∏–∫—Å—ã –ª–∏–Ω—Ç–µ—Ä–∞
lint-fix:
	npx eslint . --fix

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ dry-run —Ä–µ–∂–∏–º–µ
publish:
	npm publish --dry-run

# –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ CLI
link:
	npm link

# –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –ª–∏–Ω—Ç + —Ç–µ—Å—Ç—ã —Å —Ü–≤–µ—Ç–∞–º–∏ –∏ –≤—ã–≤–æ–¥–æ–º
check:
	@echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞..."
	@if npm run lint; then \
		echo "$(GREEN)‚úÖ –õ–∏–Ω—Ç–µ—Ä –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ$(NC)"; \
	else \
		echo "$(RED)‚ùå –û—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞$(NC)"; \
		exit 1; \
	fi
	@echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
	@if npm test; then \
		echo "$(GREEN)‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏$(NC)"; \
	else \
		echo "$(RED)‚ùå –û—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö$(NC)"; \
		exit 1; \
	fi